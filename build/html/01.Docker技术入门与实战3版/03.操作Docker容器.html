<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>操作Docker容器 &mdash; 运维开发修炼之路</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="访问Docker仓库" href="04.%E8%AE%BF%E9%97%AEDocker%E4%BB%93%E5%BA%93.html" />
    <link rel="prev" title="Docker镜像的使用" href="02.Docker%E9%95%9C%E5%83%8F%E7%9A%84%E4%BD%BF%E7%94%A8.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> 小健_Docker_K8s_Blog
            <img src="../_static/docker-k8s.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">01.Docker技术入门与实战3版</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01.%E5%88%9D%E8%AF%86Docker%E4%B8%8E%E5%AE%B9%E5%99%A8.html">初识Docker与容器</a></li>
<li class="toctree-l2"><a class="reference internal" href="02.Docker%E9%95%9C%E5%83%8F%E7%9A%84%E4%BD%BF%E7%94%A8.html">Docker镜像的使用</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">操作Docker容器</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">容器的常见操作</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">查看容器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">查看容器日志</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">启动容器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">新建并启动容器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">查看容器进程</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">查看容器信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">终止容器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">进入容器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">容器内执行命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pause-unpause">pause/unpause(暂停/恢复)容器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">删除容器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">其他容器操作</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id13">1.复制文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">2.查看变更</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">3.查看端口映射</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id16">导入和导出容器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id17">1.导出容器</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">2.导入容器</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cpublock-io">限制容器对内存、CPU、Block IO的使用</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">容器和镜像转化、迁移方式 - 运维小结</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kitematicdocker">使用Kitematic来管理Docker容器</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="04.%E8%AE%BF%E9%97%AEDocker%E4%BB%93%E5%BA%93.html">访问Docker仓库</a></li>
<li class="toctree-l2"><a class="reference internal" href="05.%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93.html">搭建本地私有仓库</a></li>
<li class="toctree-l2"><a class="reference internal" href="06.Docker%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86.html">Docker数据管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="07.Docker%E4%BD%BF%E7%94%A8%E7%BD%91%E7%BB%9C.html">Docker使用网络</a></li>
<li class="toctree-l2"><a class="reference internal" href="08.%E4%BD%BF%E7%94%A8Dockerfile%E5%88%9B%E5%BB%BA%E9%95%9C%E5%83%8F.html">使用Dockerfile创建镜像</a></li>
<li class="toctree-l2"><a class="reference internal" href="09.%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B.html">实战案例</a></li>
<li class="toctree-l2"><a class="reference internal" href="10.Docker%E6%A0%B8%E5%BF%83%E5%AE%9E%E7%8E%B0%E6%8A%80%E6%9C%AF.html">Docker核心实现技术</a></li>
<li class="toctree-l2"><a class="reference internal" href="11.%E9%85%8D%E7%BD%AE%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93.html">配置私有仓库</a></li>
<li class="toctree-l2"><a class="reference internal" href="12.%E5%AE%89%E5%85%A8%E9%98%B2%E6%8A%A4%E4%B8%8E%E9%85%8D%E7%BD%AE.html">安全防护与配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="13.%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E5%8A%9F%E8%83%BD.html">高级网络功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="14.libnetwork%E6%8F%92%E4%BB%B6%E5%8C%96%E7%BD%91%E7%BB%9C%E5%8A%9F%E8%83%BD.html">libnetwork插件化网络功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="15.Etcd%E9%AB%98%E5%8F%AF%E7%94%A8%E7%9A%84%E9%94%AE%E5%80%BC%E6%95%B0%E6%8D%AE%E5%BA%93.html">Etcd高可用的键值数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="16.Docker%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8BDocker-Compose.html">Docker三剑客之Docker-Compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="17.Docker%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8BDocker-Swarm.html">Docker三剑客之Docker-Swarm</a></li>
<li class="toctree-l2"><a class="reference internal" href="18.Docker%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8BDocker-Machine.html">Docker三剑客之Docker-Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="19.%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E5%BA%94%E7%94%A8%E6%A0%88.html">搭建一个Web应用栈</a></li>
<li class="toctree-l2"><a class="reference internal" href="20.Docker%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E5%AE%9E%E6%88%98.html">Docker高级网络实战</a></li>
<li class="toctree-l2"><a class="reference internal" href="21.%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0.html">服务发现</a></li>
<li class="toctree-l2"><a class="reference internal" href="22.Mesos-%E4%BC%98%E7%A7%80%E7%9A%84%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6%E5%B9%B3%E5%8F%B0.html">Mesos—优秀的集群资源调度平台</a></li>
<li class="toctree-l2"><a class="reference internal" href="23.Kubernetes-%E7%94%9F%E4%BA%A7%E7%BA%A7%E5%AE%B9%E5%99%A8%E9%9B%86%E7%BE%A4%E5%B9%B3%E5%8F%B0.html">Kubernetes-生产级容器集群平台</a></li>
<li class="toctree-l2"><a class="reference internal" href="24.%E5%85%B6%E4%BB%96%E7%9B%B8%E5%85%B3%E9%A1%B9%E7%9B%AE.html">其他相关项目</a></li>
<li class="toctree-l2"><a class="reference internal" href="25.%E9%99%84%E5%BD%95.html">附录</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../02.Kubernetes%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/index.html">02.Kubernetes实战指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03.Docker%E7%BB%8F%E5%85%B8%E5%AE%9E%E4%BE%8B/index.html">03.Docker经典实例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.Prometheus%E7%9B%91%E6%8E%A7%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/index.html">04.Prometheus监控运维实战</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">小健_Docker_K8s_Blog</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">01.Docker技术入门与实战3版</a> &raquo;</li>
      <li>操作Docker容器</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/01.Docker技术入门与实战3版/03.操作Docker容器.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#docker" id="id20">操作Docker容器</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id21">容器的常见操作</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id22">查看容器</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id23">查看容器日志</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id24">启动容器</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id25">新建并启动容器</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id26">查看容器进程</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id27">查看容器信息</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id28">终止容器</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id29">进入容器</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id30">容器内执行命令</a></p></li>
<li><p><a class="reference internal" href="#pause-unpause" id="id31">pause/unpause(暂停/恢复)容器</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id32">删除容器</a></p></li>
<li><p><a class="reference internal" href="#id12" id="id33">其他容器操作</a></p>
<ul>
<li><p><a class="reference internal" href="#id13" id="id34">1.复制文件</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id35">2.查看变更</a></p></li>
<li><p><a class="reference internal" href="#id15" id="id36">3.查看端口映射</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id16" id="id37">导入和导出容器</a></p>
<ul>
<li><p><a class="reference internal" href="#id17" id="id38">1.导出容器</a></p></li>
<li><p><a class="reference internal" href="#id18" id="id39">2.导入容器</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#cpublock-io" id="id40">限制容器对内存、CPU、Block IO的使用</a></p></li>
<li><p><a class="reference internal" href="#id19" id="id41">容器和镜像转化、迁移方式 - 运维小结</a></p></li>
<li><p><a class="reference internal" href="#kitematicdocker" id="id42">使用Kitematic来管理Docker容器</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="docker">
<h1><a class="toc-backref" href="#id20">操作Docker容器</a><a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h1>
<p>容器
是Docker的另一个核心概念。简单来说，容器是镜像的一个运行实例。所不同的是，镜像是静态的只读文件，而容器带有运行时需要的可写文件层，同时，容器中的应用进程处于运行状态。</p>
<p>如果认为虚拟机是模拟运行的一整套操作系统（包括内核、应用运行态环境和其他系统环境）和跑在上面的应用。那么Docker容器就是独立运行的一个（或一组）应用，以及它们必需的运行环境。</p>
<section id="id1">
<h2><a class="toc-backref" href="#id21">容器的常见操作</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>下面是容器的常用操作命令：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>create      创建容器
run         运行容器
pause       暂停容器
unpause     取消暂停继续运行容器
stop        发送 SIGTERM 停止容器
kill        发送 SIGKILL 快速停止容器
start       启动容器
restart     重启容器
attach      attach 到容器启动进程的终端
exec        在容器中启动新进程，通常使用 &quot;-it&quot; 参数
logs        显示容器启动进程的控制台输出，用 &quot;-f&quot; 持续打印
rm          从磁盘中删除容器
</pre></div>
</div>
<div class="line-block">
<div class="line">​</div>
<div class="line">## 创建容器</div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="m">1</span>.新建一个停止状态的容器
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker create -it ubuntu:latest</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps  -a</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                    PORTS               NAMES
f13492a1cba7        ubuntu:latest       <span class="s2">&quot;/bin/bash&quot;</span>         <span class="m">26</span> seconds ago      Created                                       infallible_lamarr

<span class="m">2</span>.创建一个交互型容器
docker run -it --name<span class="o">=</span>hu_ubuntu ubuntu /bin/bash


<span class="m">3</span>.创建一个后台型容器，使用-d参数。
sudo docker run --name hu_demo_ubuntu -d ubuntu /bin/bash -c <span class="s2">&quot;while true; do echo hello world; sleep 1; done&quot;</span>
</pre></div>
</div>
</section>
<section id="id2">
<h2><a class="toc-backref" href="#id22">查看容器</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="m">1</span>.docker ps 命令，可以查看当前运行的容器
<span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS               NAMES
7fd009ee1f86        ubuntu                <span class="s2">&quot;/bin/bash -c &#39;while…&quot;</span>   <span class="m">11</span> minutes ago      Up <span class="m">11</span> minutes                           hu_demo_ubuntu
e1e8c619585a        quay.io/coreos/etcd   <span class="s2">&quot;/usr/local/bin/etcd…&quot;</span>   <span class="m">20</span> hours ago        Up <span class="m">20</span> hours                             etcd


<span class="m">2</span>.Docker列出所有容器，包括运行的和停止的容器
docker ps -a


<span class="m">3</span>.Docker只列出最后创建的容器
docker ps -l

<span class="m">4</span>.使用 -n<span class="o">=</span>x 选项，此时会列出最后创建的x个容器
docker ps -n<span class="o">=</span><span class="m">2</span>
</pre></div>
</div>
</section>
<section id="id3">
<h2><a class="toc-backref" href="#id23">查看容器日志</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker logs -f hu_demo_ubuntu</span>
hello world
hello world


<span class="c1"># --tail 标志可以精确控制 logs 输出的日志行数。例如，查看最后5行日志</span>
<span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker logs -f --tail=5 hu_demo_ubuntu</span>
hello world
hello world
hello world
hello world
hello world
hello world


<span class="c1">#可以通过 -t 标志查看日志产生的时刻</span>
<span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker logs -f --tail=5 -t hu_demo_ubuntu</span>
<span class="m">2019</span>-07-05T02:48:53.092986363Z hello world
<span class="m">2019</span>-07-05T02:48:54.095842349Z hello world
<span class="m">2019</span>-07-05T02:48:55.098757187Z hello world
<span class="m">2019</span>-07-05T02:48:56.100865840Z hello world
<span class="m">2019</span>-07-05T02:48:57.104798046Z hello world
</pre></div>
</div>
</section>
<section id="id4">
<h2><a class="toc-backref" href="#id24">启动容器</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="m">1</span>.通过容器id启动
docker start 3d5e4ad6455f


<span class="m">2</span>.通过容器名称启动
sudo docker start inspect_shell

<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
3d5e4ad6455f        ubuntu:14.04        <span class="s2">&quot;/bin/bash&quot;</span>         <span class="m">18</span> hours ago        Up <span class="m">3</span> seconds                            wonderful_wozniak
</pre></div>
</div>
</section>
<section id="id5">
<h2><a class="toc-backref" href="#id25">新建并启动容器</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker run ubuntu /bin/echo &quot;hello world&quot;</span>
hello world
<span class="c1"># 当利用docker run来创建并启动容器时，Docker在后台运行的标准操作包括： ·检查本地是否存在指定的镜像，不存在就从公有仓库下载；</span>


<span class="c1"># 启动一个bash终端，允许用户进行交互：</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker run -it ubuntu:14.04 /bin/bash</span>
root@22c6b5a012b0:/#

<span class="c1">#，-t选项让Docker分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上，-i则让容器的标准输入保持打开。</span>


守护态运行
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker run -d ubuntu:14.04 /bin/sh -c &quot;while true;do echo hello world;sleep 1;done&quot;</span>
ca08bd323aecdc48e76918dd66d5e37362add12e81d43e185debc65ca4083f7b

<span class="c1">#获取容器的输出信息，可以使用docker logs命令</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker logs ca08</span>
hello world
hello world
hello world
hello world
hello world
</pre></div>
</div>
</section>
<section id="id6">
<h2><a class="toc-backref" href="#id26">查看容器进程</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker top hu_demo_ubuntu</span>
UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD
root                <span class="m">23951</span>               <span class="m">23935</span>               <span class="m">0</span>                   <span class="m">02</span>:31               ?                   <span class="m">00</span>:00:00            /bin
/bash -c <span class="k">while</span> true<span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> hello world<span class="p">;</span> sleep <span class="m">1</span><span class="p">;</span> doneroot                <span class="m">25679</span>               <span class="m">23951</span>               <span class="m">0</span>                   <span class="m">02</span>:49               ?                   <span class="m">00</span>:00:00            slee
p <span class="m">1</span>
</pre></div>
</div>
</section>
<section id="id7">
<h2><a class="toc-backref" href="#id27">查看容器信息</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 查看容器的配置信息，（容器名称、环境变量、运行命令、主机配置、数据卷......配置）</span>
docker inspect hu_demo_ubuntu


<span class="c1"># --format 格式化标志，可以查看指定部分的信息</span>
<span class="c1">#查看容器的运行状态</span>
<span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker inspect --format=&#39;{{ .State.Running }}&#39; hu_demo_ubuntu</span>
<span class="nb">true</span>

<span class="c1">#查看状态值</span>
<span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker inspect --format=&#39;{{ .State.Status }}&#39; hu_demo_ubuntu</span>
running

<span class="c1"># 查看容器的IP地址</span>
<span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker inspect --format=&#39;{{ .NetworkSettings.IPAddress }}&#39; hu_demo_ubuntu</span>
<span class="m">172</span>.17.0.2

<span class="c1">#查看容器的镜像类型</span>
<span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker inspect --format=&#39;{{ .Config.Image }}&#39; hu_demo_ubuntu</span>
ubuntu
</pre></div>
</div>
</section>
<section id="id8">
<h2><a class="toc-backref" href="#id28">终止容器</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#首先向容器发送SIGTERM信号，等待一段超时时间（默认为10秒）后，再发送SIGKILL信号来终止容器：</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
ca08bd323aec        ubuntu:14.04        <span class="s2">&quot;/bin/sh -c &#39;while...&quot;</span>   <span class="m">2</span> minutes ago       Up <span class="m">2</span> minutes                            festive_nobel
3d5e4ad6455f        ubuntu:14.04        <span class="s2">&quot;/bin/bash&quot;</span>              <span class="m">18</span> hours ago        Up <span class="m">7</span> minutes                            wonderful_wozniak
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker stop ca08</span>
ca08
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
3d5e4ad6455f        ubuntu:14.04        <span class="s2">&quot;/bin/bash&quot;</span>         <span class="m">18</span> hours ago        Up <span class="m">7</span> minutes                            wonderful_wozniak


<span class="c1"># docker kill命令会直接发送SIGKILL信号来强行终止容器。</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker kill 3d5e</span>
3d5e
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES



<span class="c1">#可以用docker ps-qa命令看到所有容器的ID</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps -qa</span>
22c6b5a012b0
bdbdb0d56db9
9339393ce470
f13492a1cba7
3d5e4ad6455f


<span class="c1">#可以使用docker start命令来重新启动</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker start 2c53</span>


<span class="c1"># docker restart命令会将一个运行态的容器先终止，然后再重新启动它：</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker restart 22c6b5a012b0</span>
22c6b5a012b0
</pre></div>
</div>
</section>
<section id="id9">
<h2><a class="toc-backref" href="#id29">进入容器</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="m">1</span>.
<span class="c1"># 用attach命令有时候并不方便。当多个窗口同时用attach命令连到同一个容器的时候，所有窗口都会同步显示。当某个窗口因命令阻塞时，其他窗口也无法执行操作了</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
22c6b5a012b0        ubuntu:14.04        <span class="s2">&quot;/bin/bash&quot;</span>         <span class="m">10</span> minutes ago      Up <span class="m">57</span> seconds                           dazzling_dijkstra

<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker attach 22c6</span>
root@22c6b5a012b0:/#





<span class="m">2</span>.
<span class="c1"># Docker从1.3.0版本起提供了一个更加方便的exec命令，可以在容器内直接执行任意命令。</span>

<span class="c1">#进入到刚创建的容器中，并启动一个bash：</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker exec -it 22c6b5a012b0 /bin/bash</span>
root@22c6b5a012b0:/#

<span class="c1"># 执行以下命令，启动一个busybox镜像容器</span>
docker run -itd busybox /bin/bash   <span class="c1">#下载镜像</span>
docker <span class="nb">exec</span> -it b47 /bin/bash       <span class="c1"># 进入镜像容器</span>

busybox：是一个mini版本的linux，有linux的所有命令行工具

<span class="m">3</span>.nsenter工具<span class="o">(</span>不常用<span class="o">)</span>
<span class="nb">cd</span> /tmp<span class="p">;</span> curl https://www.kernel.org/pub/linux/utils/util-linux/v2.24/util-linux-2.24.tar.gz <span class="p">|</span> tar -zxf -<span class="p">;</span> <span class="nb">cd</span> util-linux-2.24<span class="p">;</span>
./configure --without-ncurses
make nsenter <span class="o">&amp;&amp;</span> cp nsenter /usr/local/bin

<span class="c1"># 使用nsenter连接到容器，先找到容器进程的PID，通过下面的命令获取</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ util-linux-2.24<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
22c6b5a012b0        ubuntu:14.04        <span class="s2">&quot;/bin/bash&quot;</span>         <span class="m">31</span> minutes ago      Up <span class="m">18</span> minutes                           dazzling_dijkstra

<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ util-linux-2.24<span class="o">]</span><span class="c1"># docker inspect -f {{.State.Pid}} 22c6b5a012b0</span>
<span class="m">6450</span>


<span class="c1"># PID=$(docker inspect --format &quot;{{ .State.Pid }}&quot; &lt;container&gt;)</span>

<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ util-linux-2.24<span class="o">]</span><span class="c1"># nsenter --target 6450 --mount --uts --ipc --net --pid</span>
root@22c6b5a012b0:/#


<span class="c1">#如果只是为了查看启动命令的输出，可以使用 docker logs 命令：</span>



attach VS <span class="nb">exec</span>

attach 与 <span class="nb">exec</span> 主要区别如下:
attach 直接进入容器 启动命令 的终端，不会启动新的进程。
<span class="nb">exec</span> 则是在容器中打开新的终端，并且可以启动新的进程。
如果想直接在终端中查看启动命令的输出，用 attach；其他情况使用 exec。
</pre></div>
</div>
<p>退出容器，保持容器继续运行：</p>
<p>ctrl-p和ctrl-q。 如果使用exit。退出容器时，容器会自动关闭。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#运行远程机器上的容器</span>
docker run -it -h test.up.com daocloud.io/centos:7
</pre></div>
</div>
</section>
<section id="id10">
<h2><a class="toc-backref" href="#id30">容器内执行命令</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 交互型任务的例子</span>
<span class="o">[</span>root@hujianli-docker01 centos<span class="o">]</span><span class="c1"># docker exec -it 7fd009ee1f86 ps aux</span>
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         <span class="m">1</span>  <span class="m">0</span>.0  <span class="m">0</span>.0  <span class="m">18364</span>  <span class="m">1584</span> ?        Ss   <span class="m">02</span>:31   <span class="m">0</span>:01 /bin/bash -c wh
root      <span class="m">1617</span>  <span class="m">0</span>.0  <span class="m">0</span>.0   <span class="m">4520</span>   <span class="m">384</span> ?        S    <span class="m">02</span>:58   <span class="m">0</span>:00 sleep <span class="m">1</span>
root      <span class="m">1618</span>  <span class="m">0</span>.0  <span class="m">0</span>.0  <span class="m">34388</span>  <span class="m">1472</span> pts/0    Rs+  <span class="m">02</span>:58   <span class="m">0</span>:00 ps aux

<span class="c1"># 后台型任务的例子：</span>
$ sudo docker <span class="nb">exec</span> -d daemon_dave touch /etc/new_config_file
</pre></div>
</div>
</section>
<section id="pause-unpause">
<h2><a class="toc-backref" href="#id31">pause/unpause(暂停/恢复)容器</a><a class="headerlink" href="#pause-unpause" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
350a409c2eb2        nginx               <span class="s2">&quot;nginx -g &#39;daemon ...&quot;</span>   <span class="m">4</span> seconds ago       Up <span class="m">3</span> seconds        <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   epic_meninsk

<span class="c1">#暂停工作，比如对文件系统打快照</span>

<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker pause 350a4</span>
350a4
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                   PORTS                  NAMES
350a409c2eb2        nginx               <span class="s2">&quot;nginx -g &#39;daemon ...&quot;</span>   <span class="m">26</span> seconds ago      Up <span class="m">25</span> seconds<span class="o">(</span>Paused<span class="o">)</span>    <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   epic_menins


<span class="c1"># 恢复容器运行</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker unpause 350a4</span>
350a4
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
350a409c2eb2        nginx               <span class="s2">&quot;nginx -g &#39;daemon ...&quot;</span>   <span class="m">2</span> minutes ago       Up About a minute   <span class="m">0</span>.0.0.0:8080-&gt;80/tcp   epic_menins
</pre></div>
</div>
</section>
<section id="id11">
<h2><a class="toc-backref" href="#id32">删除容器</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#默认情况下，docker rm命令只能删除处于终止或退出状态的容器，并不能删除还处于运行状态的容器</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES
22c6b5a012b0        ubuntu:14.04        <span class="s2">&quot;/bin/bash&quot;</span>              <span class="m">35</span> minutes ago      Up <span class="m">22</span> minutes                                     dazzling_dijkstra
bdbdb0d56db9        ubuntu              <span class="s2">&quot;/bin/echo &#39;hello ...&quot;</span>   <span class="m">36</span> minutes ago      Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> <span class="m">36</span> minutes ago                         eloquent_swartz
9339393ce470        ubuntu              <span class="s2">&quot;/bin/bash echo &#39;h...&quot;</span>   <span class="m">36</span> minutes ago      Exited <span class="o">(</span><span class="m">126</span><span class="o">)</span> <span class="m">36</span> minutes ago                       objective_blackwell
f13492a1cba7        ubuntu:latest       <span class="s2">&quot;/bin/bash&quot;</span>              <span class="m">40</span> minutes ago      Created                                           infallible_lamarr
3d5e4ad6455f        ubuntu:14.04        <span class="s2">&quot;/bin/bash&quot;</span>              <span class="m">19</span> hours ago        Exited <span class="o">(</span><span class="m">137</span><span class="o">)</span> <span class="m">29</span> minutes ago                       wonderful_wozniak

<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker rm 3d5e4ad6455f</span>
3d5e4ad6455f

<span class="c1"># 如果要直接删除一个运行中的容器，可以添加-f参数</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker run -d ubuntu:14.04 /bin/sh -c &quot;while true;do echo hello world;sleep 1;done&quot;</span>
d8f004f4573f9703d3734d3f0096ff5ba209f0b16e9c7b5d6b528b166acd9b66


<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker rm d8f00</span>
Error response from daemon: You cannot remove a running container d8f004f4573f9703d3734d3f0096ff5ba209f0b16e9c7b5d6b528b166acd9b66. Stop the container before attempting removal

or use -f<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker rm -f  d8f00</span>
d8f00


<span class="c1"># 同时删除后台多个容器</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker rm $(docker ps -qa)</span>
bdbdb0d56db9
9339393ce470

或者：
<span class="c1">#docker rm 一次可以指定多个容器，如果希望批量删除所有已经退出的容器，可以执行如下命令：</span>

<span class="c1">## 根据格式删除所有容器，容器的状态为停止的</span>
docker rm -v <span class="k">$(</span>docker ps -aq -f <span class="nv">status</span><span class="o">=</span>exited<span class="k">)</span>
docker rm <span class="k">$(</span>docker ps -a -q<span class="k">)</span>

<span class="c1">## 强制批量删除</span>
docker rm <span class="k">$(</span>docker ps -a -q<span class="k">)</span> --force

<span class="c1"># 使用awk实现</span>
docker rm <span class="k">$(</span>docker ps -a<span class="p">|</span>awk <span class="s1">&#39;/Exited/{print $1}&#39;</span><span class="k">)</span>

<span class="c1">#或者批量清理临时镜像文件</span>
docker rmi <span class="k">$(</span>docker images -q -f <span class="nv">dangling</span><span class="o">=</span><span class="nb">true</span><span class="k">)</span>

<span class="c1">#批量删除运行中的容器</span>
docker rm -f <span class="k">$(</span>docker ps<span class="p">|</span>grep -v <span class="s2">&quot;CONTAINER&quot;</span><span class="p">|</span>awk <span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span>

<span class="c1"># 执行无法删除运行中的容器，我们需要先停止然后在删除</span>
docker stop d8f00
docker rm d8f00
</pre></div>
</div>
</section>
<section id="id12">
<h2><a class="toc-backref" href="#id33">其他容器操作</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<section id="id13">
<h3><a class="toc-backref" href="#id34">1.复制文件</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 容器数据向外复制</span>
Usage:  docker cp <span class="o">[</span>OPTIONS<span class="o">]</span> CONTAINER:SRC_PATH DEST_PATH<span class="p">|</span>-

<span class="c1"># 外部数据复制到容器内</span>
        docker cp <span class="o">[</span>OPTIONS<span class="o">]</span> SRC_PATH<span class="p">|</span>- CONTAINER:DEST_PATH
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker cp 9eac3a /var/jenkins_home/gitee_workspace_parallel/ /home/
<span class="s2">&quot;docker cp&quot;</span> requires exactly <span class="m">2</span> arguments.
See <span class="s1">&#39;docker cp --help&#39;</span>.
</pre></div>
</div>
</section>
<section id="id14">
<h3><a class="toc-backref" href="#id35">2.查看变更</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>查看jenkins_jenkins_1容器内的数据修改：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker container diff jenkins_jenkins_1
C /tmp
A /tmp/hsperfdata_jenkins
A /tmp/hsperfdata_jenkins/6
A /tmp/jetty-0_0_0_0-8080-war-_-any-6407271552317565788.dir
A /tmp/jetty-0_0_0_0-8080-war-_-any-6753302642276023631.dir
A /tmp/jetty-0_0_0_0-8080-war-_-any-6829047221675530177.dir
A /tmp/winstone3743544242970475678.jar
A /tmp/winstone4225465649559590246.jar
A /tmp/winstone7204593242092902219.jar
</pre></div>
</div>
</section>
<section id="id15">
<h3><a class="toc-backref" href="#id36">3.查看端口映射</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container port jenkins_jenkins_1
<span class="m">8080</span>/tcp -&gt; <span class="m">0</span>.0.0.0:8080
</pre></div>
</div>
</section>
</section>
<section id="id16">
<h2><a class="toc-backref" href="#id37">导入和导出容器</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<section id="id17">
<h3><a class="toc-backref" href="#id38">1.导出容器</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES
22c6b5a012b0        ubuntu:14.04        <span class="s2">&quot;/bin/bash&quot;</span>              <span class="m">40</span> minutes ago      Up <span class="m">26</span> minutes                                     dazzling_dijkstra
bdbdb0d56db9        ubuntu              <span class="s2">&quot;/bin/echo &#39;hello ...&quot;</span>   <span class="m">41</span> minutes ago      Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> <span class="m">41</span> minutes ago                         eloquent_swartz
9339393ce470        ubuntu              <span class="s2">&quot;/bin/bash echo &#39;h...&quot;</span>   <span class="m">41</span> minutes ago      Exited <span class="o">(</span><span class="m">126</span><span class="o">)</span> <span class="m">41</span> minutes ago                       objective_blackwell
f13492a1cba7        ubuntu:latest       <span class="s2">&quot;/bin/bash&quot;</span>              <span class="m">45</span> minutes ago      Created                                           infallible_lamarr

<span class="c1">#分别导出容器f13492a1cba7和容器22c6b5a012b0 到文件test_for_ubuntu:latest和文件test_for_run_ubuntu.tar</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker export -o test_for_ubuntu:latest f13492</span>
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker export 22c6b &gt; test_for_run_ubuntu.tar</span>
之后，可将导出的tar文件传输到其他机器上，然后再通过导入命令导入到系统中，从而实现容器的迁移。
</pre></div>
</div>
</section>
<section id="id18">
<h3><a class="toc-backref" href="#id39">2.导入容器</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES
bdbdb0d56db9        ubuntu              <span class="s2">&quot;/bin/echo &#39;hello ...&quot;</span>   <span class="m">48</span> minutes ago      Exited <span class="o">(</span><span class="m">0</span><span class="o">)</span> <span class="m">48</span> minutes ago                         eloquent_swartz
9339393ce470        ubuntu              <span class="s2">&quot;/bin/bash echo &#39;h...&quot;</span>   <span class="m">49</span> minutes ago      Exited <span class="o">(</span><span class="m">126</span><span class="o">)</span> <span class="m">49</span> minutes ago                       objective_blackwell

<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker import test_for_ubuntu\:latest  test_hu/ubuntu:14.04</span>
sha256:d8a336bc07fd1b05266710a5d93f05d6a08dae99d0ae5afa1498ad9a78325191
<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker import test_for_run_ubuntu.tar run_hu/ubuntu:14.04</span>
sha256:a7c21f91b4afe37b48a1abc1b15ce2cd7b5c759367579b0837a4c6f64332a65f

<span class="o">[</span>root@iZ2ze38chylj63vuj6fqiaZ ~<span class="o">]</span><span class="c1"># docker images</span>
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
run_hu/ubuntu                      <span class="m">14</span>.04               a7c21f91b4af        <span class="m">4</span> seconds ago       <span class="m">175</span> MB
test_hu/ubuntu                     <span class="m">14</span>.04               d8a336bc07fd        <span class="m">11</span> seconds ago      <span class="m">69</span>.9 MB
</pre></div>
</div>
</section>
</section>
<section id="cpublock-io">
<h2><a class="toc-backref" href="#id40">限制容器对内存、CPU、Block IO的使用</a><a class="headerlink" href="#cpublock-io" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#内存</span>

docker run -m 200M --memory-swap<span class="o">=</span>300M ubuntu
其含义是允许该容器最多使用 200M 的内存和 100M 的 swap。默认情况下，上面两组参数为 -1，即对容器内存和 swap 的使用没有限制


docker run -it -m 200M --memory-swap<span class="o">=</span>300M progrium/stress --vm <span class="m">1</span> --vm-bytes 280M
--vm <span class="m">1</span>：启动 <span class="m">1</span> 个内存工作线程。
--vm-bytes 280M：每个线程分配 280M 内存。

<span class="c1">#####如果在启动容器时只指定 -m 而不指定 --memory-swap，那么 --memory-swap 默认为 -m 的两倍，比如：</span>
docker run -it -m 200M ubuntu
容器最多使用 200M 物理内存和 200M swap。


<span class="c1">#CPU</span>

比如在 host 中启动了两个容器：
docker run --name <span class="s2">&quot;container_A&quot;</span> -c <span class="m">1024</span> ubuntu
docker run --name <span class="s2">&quot;container_B&quot;</span> -c <span class="m">512</span> ubuntu
container_A 的 cpu share <span class="m">1024</span>，是 container_B 的两倍。当两个容器都需要 CPU 资源时，container_A 可以得到的 CPU 是 container_B 的两倍


<span class="c1"># Block IO</span>
docker run -it --name container_A --blkio-weight <span class="m">600</span> ubuntu
docker run -it --name container_B --blkio-weight <span class="m">300</span> ubuntu
限制 bps 和 iops
bps 是 byte per second，每秒读写的数据量。
iops 是 io per second，每秒 IO 的次数。

可通过以下参数控制容器的 bps 和 iops：
--device-read-bps，限制读某个设备的 bps。
--device-write-bps，限制写某个设备的 bps。
--device-read-iops，限制读某个设备的 iops。
--device-write-iops，限制写某个设备的 iops。
</pre></div>
</div>
</section>
<section id="id19">
<h2><a class="toc-backref" href="#id41">容器和镜像转化、迁移方式 - 运维小结</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>一、容器转化为镜像（docker export、docker import）
1）docker export：表示将容器导出文件包
两种命令方式（finhub-cms为容器名）：
docker export finhub-cms &gt; finhub-cms.tar
docker export -o finhub-cms.tar finhub-cms
2）docker import：表示根据docker export 导出的文件包新建一个镜像。可以基于这个新镜像创建容器，实现容器迁移。
另种命令方式：
docker import finhub-cms.tar finhub-cms:v1
cat finhub-cms.tar | docker import - finhub-cms:v1

3）docker commit：也可以实现将容器转化为镜像。
docker commit finhub-cms finhub-cms:v1



二、镜像迁移（镜像导出、镜像导入）
1）docker save：表示将镜像打包，方便迁移
两种命令方式（finhub-cms:v1为镜像名）：
docker save finhub-cms:v1 &gt; finhub-cms_v1.tar.gz
docer save -o finhub-cms_v1.tar.gz finhub-cms:v1

2）docker load： 表示将docker save导出的镜像包导入到本地仓库
两种命令方式：
docker load &lt; finhub-cms_v1.tar.gz
docker load --input finhub-cms_v1.tar.gz



三、注意细节
一般情况下：
docker save 导出的镜像包 要比 docker export 打成的容器文件包大一点。这是因为docker export导出的容器包 丢失了历史和元数据metadata。
</pre></div>
</div>
<p>参考文献： <a class="reference external" href="https://www.cnblogs.com/kevingrace/p/14434806.html">https://www.cnblogs.com/kevingrace/p/14434806.html</a></p>
</section>
<section id="kitematicdocker">
<h2><a class="toc-backref" href="#id42">使用Kitematic来管理Docker容器</a><a class="headerlink" href="#kitematicdocker" title="Permalink to this headline">¶</a></h2>
<p>Kitematic是一个开源项目，旨在简化在Mac或Windows
PC上使用Docker的过程。Kitematic自动化Docker安装和设置过程，并提供直观的图形用户界面（GUI）来运行Docker容器。</p>
<p>因此，我们推荐使用Kitematic工具来查看和管理自己的容器服务。如果尚未安装此工具，可以通过以下方式进行安装：</p>
<p>● 从Docker for Mac或Docker for
Windows菜单中选择“Kitematic”选项，开始使用Kitematic安装。</p>
<p>●
直接从Kitematic版本页面下载Kitematic，下载地址为https://github.com/docker/kitematic/releases/。</p>
<p>另外，Kitematic集成了Docker
Hub，允许通过搜索、拉取任何需要的镜像，并在上面部署应用，同时也能很好地切换到命令行模式。目前包括自动映射端口、可视化更改环境变量、配置卷、流式日志等功能。</p>
<p>如果安装完成后无法打开，可以将Kitematic安装后的文件迁移到Docker指定目录<code class="docutils literal notranslate"><span class="pre">“C:\Program</span> <span class="pre">Files\Docker\Kitematic”。</span></code></p>
<p>Kitematic是开源的，如果大家有兴趣，可以访问其开源库下载全部源代码进行研究，下载地址为https://github.com/docker/kitematic。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="02.Docker%E9%95%9C%E5%83%8F%E7%9A%84%E4%BD%BF%E7%94%A8.html" class="btn btn-neutral float-left" title="Docker镜像的使用" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="04.%E8%AE%BF%E9%97%AEDocker%E4%BB%93%E5%BA%93.html" class="btn btn-neutral float-right" title="访问Docker仓库" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, huxiaojian.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>